<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>2D Grid + Charts + Tables</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<style>
    :root {
        --tg-safe-top: env(safe-area-inset-top, 0px);
        --tg-safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #0f0f10;
        font-family: "Inter", sans-serif;
    }

    .grid-wrapper {
        width: 100vw;
        height: calc(100vh - var(--tg-safe-top) - var(--tg-safe-bottom));
        margin-top: var(--tg-safe-top);
        margin-bottom: var(--tg-safe-bottom);
        overflow: scroll;
        -webkit-overflow-scrolling: touch;

        display: grid;
        grid-template-columns: repeat(3, 100vw);
        grid-template-rows: repeat(2, 100vh);

        scroll-snap-type: both mandatory;
        overscroll-behavior: contain;
    }

    .screen {
        scroll-snap-align: start;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }

    .card {
        width: 90%;
        max-width: 900px;
        background: #1c1c1e;
        border-radius: 18px;
        padding: 25px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.35);
        border: 1px solid rgba(255,255,255,0.08);
    }

    .title {
        text-align: center;
        font-size: 26px;
        color: #e5e5ea;
        margin-bottom: 20px;
    }

    .chart {
        width: 100%;
        height: 350px;
        margin-bottom: 20px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        color: #f2f2f7;
        font-size: 15px;
    }

    table th, table td {
        padding: 10px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    table th {
        text-align: left;
        color: #a1a1a6;
        font-weight: 500;
    }

    @media (max-width: 480px) {
        .chart { height: 260px; }
        .title { font-size: 20px; }
    }
</style>

<script>
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawAllCharts);

    function drawChart(target, dataArray) {
        const data = google.visualization.arrayToDataTable(dataArray);
        const options = {
            backgroundColor: "transparent",
            pieHole: 0.55,
            legend: { position: "right", textStyle: { color: "#f2f2f7" } },
            chartArea: { width: "100%", height: "100%" },
            pieSliceText: "percentage",
            pieSliceBorderColor: "transparent"
        };

        const chart = new google.visualization.PieChart(
            document.getElementById(target)
        );
        chart.draw(data, options);
    }

    function fillTable(id, dataArray) {
        const table = document.getElementById(id);
        let html = "";

        for (let i = 1; i < dataArray.length; i++) {
            html += `<tr>
                        <td>${dataArray[i][0]}</td>
                        <td>${dataArray[i][1]}</td>
                    </tr>`;
        }

        table.innerHTML = html;
    }

    function drawAllCharts() {
        const sets = {
            chart_11: [
                ["Категория", "Количество"],
                ["Инфекции", 1000],
                ["Новообразования", 700],
                ["Система крови", 510],
                ["Сосуды мозга", 290],
            ],
            chart_12: [
                ["Категория", "Количество"],
                ["Кошки", 40],
                ["Собаки", 25],
                ["Хомяки", 12],
                ["Попугаи", 8],
            ],
            chart_13: [
                ["Категория", "Количество"],
                ["iOS", 60],
                ["Android", 35],
                ["Другое", 5],
            ],
            chart_21: [
                ["Категория", "Количество"],
                ["Смайлики", 120],
                ["Стикеры", 300],
                ["GIF", 50],
            ],
            chart_22: [
                ["Категория", "Количество"],
                ["Пицца", 55],
                ["Суши", 73],
                ["Бургеры", 44],
            ],
            chart_23: [
                ["Категория", "Количество"],
                ["SQL", 80],
                ["Swift", 60],
                ["Laravel", 75],
                ["Python", 90],
            ],
        };

        for (let key in sets) {
            drawChart(key, sets[key]);
            fillTable(key + "_table", sets[key]);
        }
    }

    Telegram.WebApp.onEvent("viewportChanged", drawAllCharts);
    window.onresize = drawAllCharts;
</script>

</head>

<body>

<div class="grid-wrapper">

    <div class="screen">
        <div class="card">
            <div class="title">Экран 1.1</div>
            <div id="chart_11" class="chart"></div>
            <table>
                <thead><tr><th>Категория</th><th>Количество</th></tr></thead>
                <tbody id="chart_11_table"></tbody>
            </table>
        </div>
    </div>

    <div class="screen">
        <div class="card">
            <div class="title">Экран 1.2</div>
            <div id="chart_12" class="chart"></div>
            <table>
                <thead><tr><th>Категория</th><th>Количество</th></tr></thead>
                <tbody id="chart_12_table"></tbody>
            </table>
        </div>
    </div>

    <div class="screen">
        <div class="card">
            <div class="title">Экран 1.3</div>
            <div id="chart_13" class="chart"></div>
            <table>
                <thead><tr><th>Категория</th><th>Количество</th></tr></thead>
                <tbody id="chart_13_table"></tbody>
            </table>
        </div>
    </div>

    <div class="screen">
        <div class="card">
            <div class="title">Экран 2.1</div>
            <div id="chart_21" class="chart"></div>
            <table>
                <thead><tr><th>Категория</th><th>Количество</th></tr></thead>
                <tbody id="chart_21_table"></tbody>
            </table>
        </div>
    </div>

    <div class="screen">
        <div class="card">
            <div class="title">Экран 2.2</div>
            <div id="chart_22" class="chart"></div>
            <table>
                <thead><tr><th>Категория</th><th>Количество</th></tr></thead>
                <tbody id="chart_22_table"></tbody>
            </table>
        </div>
    </div>

    <div class="screen">
        <div class="card">
            <div class="title">Экран 2.3</div>
            <div id="chart_23" class="chart"></div>
            <table>
                <thead><tr><th>Категория</th><th>Количество</th></tr></thead>
                <tbody id="chart_23_table"></tbody>
            </table>
        </div>
    </div>

</div>

</body>
</html>
